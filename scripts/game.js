!function e(t,i,s){function r(a,l){if(!i[a]){if(!t[a]){var n="function"==typeof require&&require;if(!l&&n)return n(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[a]={exports:{}};t[a][0].call(p.exports,function(e){var i=t[a][1][e];return r(i?i:e)},p,p.exports,e,t,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)r(s[a]);return r}({1:[function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=e("states/GameState"),n=s(l),h=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,1280,720,Phaser.AUTO,"content",null));return e.state.add("GameState",n["default"],!1),e.state.start("GameState"),e}return a(t,e),t}(Phaser.Game);new h},{"states/GameState":2}],2:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),l=function(e){function t(){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"preload",value:function(){this.game.load.image("ball","assets/ballGrey.png"),this.game.load.image("paddle","assets/paddleBlu.png"),this.game.load.image("blueBlock","assets/element_blue_square_glossy.png"),this.game.load.image("greenBlock","assets/element_green_square_glossy.png"),this.game.load.image("purpleBlock","assets/element_purple_cube_glossy.png"),this.game.load.image("redBlock","assets/element_red_square_glossy.png"),this.game.load.image("yellowBlock","assets/element_yellow_square_glossy.png"),this.game.load.image("greyBlock","assets/element_grey_square_glossy.png"),this.game.load.image("heart","assets/heart.png"),this.game.load.bitmapFont("carrier_command","assets/fonts/carrier_command.png","assets/fonts/carrier_command.xml")}},{key:"initializeProps",value:function(){var e={},t={x:this.game.world.centerX,y:this.game.world.centerY},i={width:32,height:32,paddingTop:32},s=["redBlock","yellowBlock","greenBlock","blueBlock","purpleBlock"],r=104,o=24,a=200,l={width:r,height:o,initialX:t.x-r/2,initialY:t.y+a,segments:8,segmentAngle:15},n={initialX:t.x,initialY:t.y,initialVelocityX:0,initialVelocityY:500},h={width:128,height:128};return e.center=t,e.brickProps=i,e.brickTypes=s,e.paddleProps=l,e.ballProps=n,e.lives=3,e.heartProps=h,e.hearts=[],e.score=0,e.destroyed=0,e.brickCount=this.game.width/i.width*s.length,e}},{key:"create",value:function(){this.props=this.initializeProps(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.createBricks(),this.createBall(),this.createPaddle(),this.createHearts(),this.createScoreText(),this.cursors=this.game.input.keyboard.createCursorKeys()}},{key:"update",value:function(){this.hitBrick=this.game.physics.arcade.collide(this.ball,this.bricks,this.collideWithBrick,null,this),this.game.physics.arcade.overlap(this.ball,this.paddle,this.collideWithPaddle,null,this),this.paddle.body.velocity.x=this.props.ballProps.initialVelocityX;var e=this.props.ballProps.initialVelocityY;this.cursors.left.isDown?this.paddle.body.velocity.x=-e:this.cursors.right.isDown&&(this.paddle.body.velocity.x=e),this.ball.body.blocked.down&&this.reset(!1)}},{key:"collideWithPaddle",value:function(e,t){var i=this.props,s=i.paddleProps,r=i.ballProps,o=s.width/s.segments,a=Math.floor((e.x-t.x)/o);a>s.segments-1?a=s.segments-1:a<0&&(a=0),a=-(s.segments/2)+a;var l=-90+a*s.segmentAngle;this.game.physics.arcade.velocityFromAngle(l,r.initialVelocityY,this.ball.body.velocity)}},{key:"collideWithBrick",value:function(e,t){this.props.destroyed++,this.props.score+=10,this.scoreText.text="Score: "+this.props.score,t.kill(),this.props.destroyed===this.props.brickCount&&this.showVictory()}},{key:"createBricks",value:function(){this.bricks&&this.bricks.destroy(!0),this.bricks=this.game.add.group(),this.bricks.enableBody=!0;for(var e=this.props.brickProps,t=0;t<this.props.brickTypes.length;t++)for(var i=0;i<this.game.width;i+=e.width){var s=this.bricks.create(i,t*e.height+e.paddingTop,this.props.brickTypes[t]);s.body.immovable=!0}}},{key:"createBall",value:function(){this.ball=this.game.add.sprite(this.props.ballProps.initialX,this.props.ballProps.initialY,"ball"),this.game.physics.arcade.enable(this.ball),this.ball.body.collideWorldBounds=!0,this.ball.body.bounce.setTo(1,1),this.ball.body.velocity.y=this.props.ballProps.initialVelocityY}},{key:"createPaddle",value:function(){this.paddle=this.game.add.sprite(this.props.paddleProps.initialX,this.props.paddleProps.initialY,"paddle"),this.game.physics.arcade.enable(this.paddle),this.paddle.body.collideWorldBounds=!0,this.paddle.body.immovable=!0}},{key:"createHearts",value:function(){this.hearts&&this.hearts.destroy(),this.hearts=this.game.add.group();for(var e=this.props.brickProps.width/this.props.heartProps.width,t=this.game.width-this.props.brickProps.width,i=0;i<this.props.lives;i++){var s=this.game.add.sprite(t,0,"heart");s.scale.setTo(e,e),this.props.hearts.push(s),t-=this.props.brickProps.width}}},{key:"createScoreText",value:function(){this.scoreText&&this.scoreText.destroy(!0),this.scoreText=this.game.add.bitmapText(0,0,"carrier_command","Score: "+this.props.score,16)}},{key:"reset",value:function(e){if(this.ball.body.x=this.props.ballProps.initialX,this.ball.body.y=this.props.ballProps.initialY,this.ball.body.velocity.x=this.props.ballProps.initialVelocityX,this.ball.body.velocity.y=this.props.ballProps.initialVelocityY,this.paddle.body.x=this.props.paddleProps.initialX,this.paddle.body.y=this.props.paddleProps.initialY,e)this.props.lives=3,this.props.destroyed=0,this.props.score=0,this.createHearts(),this.createBricks(),this.createScoreText();else{this.props.lives--;var t=this.props.hearts.pop();t&&t.kill(),0===this.props.lives&&this.endGame()}}},{key:"endGame",value:function(){this.ball.body.velocity.y=0,this.endText=this.game.add.bitmapText(this.props.center.x,this.props.center.y,"carrier_command","Game Over",32),this.endText.anchor.setTo(.5,.5),this.game.input.onDown.addOnce(this.restart.bind(this,this.endText),this)}},{key:"showVictory",value:function(){this.victoryText=this.game.add.bitmapText(this.props.center.x,this.props.center.y,"carrier_command","You Win",32),this.victoryText.anchor.setTo(.5,.5),this.game.input.onDown.addOnce(this.restart.bind(this,this.victoryText),this)}},{key:"restart",value:function(e){e.destroy(),this.reset(!0)}}]),t}(Phaser.State);i["default"]=l},{}]},{},[1]);